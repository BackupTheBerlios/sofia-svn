<Window
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xml:lang="fr-FR"
	x:Class="Sofia.Window1"
	x:Name="Window"
	Title="Window"
	Width="640" Height="480">

	<Window.Resources>	    
		<XmlDataProvider x:Key="MainMenuData">
			<x:XData>
				<Items xmlns="">
					<Item Title="Nouveau" GroupName="Dossiers" />
					<Item Title="Nouveau..." GroupName="Documents" />
					<Item Title="Sauvegarder" GroupName="Documents" />
				</Items>
			</x:XData>
		</XmlDataProvider>
		<CollectionViewSource x:Key="MainMenuViewSource" Source="{Binding Mode=Default, Source={StaticResource MainMenuData}, XPath=/Items/Item}">
			<CollectionViewSource.GroupDescriptions>
				<PropertyGroupDescription PropertyName="GroupName"/>
			</CollectionViewSource.GroupDescriptions>
		</CollectionViewSource>
		<DataTemplate x:Key="GroupHeaderTemplate">
			<Grid Background="#d9e4ec">
                <TextBlock Text="{Binding Mode=Default, Source={StaticResource MainMenuData}, XPath=/Items/Item}" Margin="4"/>
                <Rectangle Stroke="{x:Static SystemColors.MenuBrush}" VerticalAlignment="Top" Height="1" />
                <Rectangle Stroke="#bbb" VerticalAlignment="Bottom"  Height="1" />
              </Grid>
		</DataTemplate>		
	</Window.Resources>
	<StackPanel>
		<Menu>
			<MenuItem Header="Documents" DockPanel.Dock="Top" DataContext="{DynamicResource MainMenuViewSource}" ItemsSource="{Binding Mode=OneWay}" >			
				<MenuItem.ItemContainerStyle>
					<Style TargetType="{x:Type MenuItem}">
						<Setter Property="Header" Value="{Binding XPath=@Title}" />
					</Style>
				</MenuItem.ItemContainerStyle>				
				<MenuItem.GroupStyle>
					<GroupStyle HidesIfEmpty="True">
						<GroupStyle.HeaderTemplate>
							<DataTemplate>
								<Grid Background="#d9e4ec">
									<TextBlock Text="{Binding Mode=Default, Source={StaticResource MainMenuData}, XPath=/Items/Item}" Margin="4"/>
									<Rectangle Stroke="{x:Static SystemColors.MenuBrush}" VerticalAlignment="Top" Height="1" />
									<Rectangle Stroke="#bbb" VerticalAlignment="Bottom"  Height="1" />
								</Grid>
							</DataTemplate>		
						</GroupStyle.HeaderTemplate>
					</GroupStyle>
				</MenuItem.GroupStyle>				
			</MenuItem>
		</Menu>
		<ToolBarTray DockPanel.Dock="Top">
			<ToolBar Margin="5"  Width="200"  Height="32">
				<Button>
					<TextBlock Margin="5">Fichier</TextBlock>
				</Button>
				<Button>
					<TextBlock Margin="5">A2</TextBlock>
				</Button>
				<Button>
					<TextBlock Margin="5">A3</TextBlock>
				</Button>
				<Button>
					<TextBlock Margin="5">A4</TextBlock>
				</Button>
			</ToolBar>
			<ToolBar Margin="5" Width="130" Height="32">
				<Button>
					<TextBlock Margin="5">B1</TextBlock>
				</Button>
				<Button>
					<TextBlock Margin="5">B2</TextBlock>
				</Button>
				<Button>				
					<TextBlock Margin="5">B3</TextBlock>
				</Button>
			</ToolBar>
		</ToolBarTray>
		<Grid ShowGridLines="False">
		<Grid.Resources>        
    </Grid.Resources>
			<Grid.RowDefinitions>
				<RowDefinition />
				<RowDefinition />
			</Grid.RowDefinitions>
			<Grid.ColumnDefinitions>
				<ColumnDefinition  />
				<ColumnDefinition />
			</Grid.ColumnDefinitions>
		</Grid>
		<TabControl Grid.Row="0" Grid.Column="0">
			<TabItem Header="Page 1">
			</TabItem>
			<TabItem Header="Page 2">
			</TabItem>
		</TabControl>

		<Button HorizontalAlignment="Left" Content="Button" Style="{Binding Path=Style, ElementName=Window, Mode=Default}"/>

	</StackPanel>
	

</Window>