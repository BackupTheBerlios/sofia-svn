<Window
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xml:lang="fr-FR"
	x:Class="Sofia.Window1"
	x:Name="Window"
	Title="Window"
	Width="640" Height="480" AllowDrop="True" WindowStartupLocation="CenterScreen" WindowState="Normal" WindowStyle="SingleBorderWindow" xmlns:d="http://schemas.microsoft.com/expression/blend/2006" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d">

	<Window.Resources>	 
			<XmlDataProvider x:Key="MainToolBarData">
			<x:XData>
				<Items xmlns="">
					<Item Title="Nouveau" ImageSource="filenew_16.png" />
				</Items>
			</x:XData>
		</XmlDataProvider>  
		<!--
		<XmlDataProvider x:Key="MainMenuData">
			<x:XData>
				<Items xmlns="">
					<Item Title="Nouveau" GroupName="Dossiers" />
					<Item Title="Nouveau..." GroupName="Documents" />
					<Item Title="Sauvegarder" GroupName="Documents" />
				</Items>
			</x:XData>
		</XmlDataProvider>
		
		<CollectionViewSource x:Key="MainMenuViewSource" Source="{Binding Mode=Default, Source={StaticResource MainMenuData}, XPath=/Items/Item}">
			<CollectionViewSource.GroupDescriptions>
				<PropertyGroupDescription PropertyName="@GroupName"/>
			</CollectionViewSource.GroupDescriptions>
		</CollectionViewSource>
		
		<DataTemplate x:Key="GroupHeaderTemplate">
			<Grid Background="#d9e4ec">
                <TextBlock Text="{Binding Mode=Default, Source={StaticResource MainMenuData}, XPath=/Items/Item}" Margin="4"/>
                <Rectangle Stroke="{x:Static SystemColors.MenuBrush}" VerticalAlignment="Top" Height="1" />
                <Rectangle Stroke="#bbb" VerticalAlignment="Bottom"  Height="1" />
              </Grid>
		</DataTemplate>		
		-->
		<DataTemplate x:Key="MainToolBarDataTemplate">
			<Button Style="{DynamicResource PhantomStyle}" Width="Auto" Height="Auto" FontFamily="Verdana" FontSize="9">
				<Grid Width="Auto" Height="Auto" Margin="0,0,0,0">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="16"/>
						<ColumnDefinition Width="Auto" MinWidth="16"/>
					</Grid.ColumnDefinitions>
					<Image 
						Source="{Binding Mode=OneWay, XPath=@ImageSource}" 
						HorizontalAlignment="Stretch" 						
						Width = "Auto"
						Height = "22"
						x:Name="image"
						Margin="0,0,0,0" VerticalAlignment="Stretch" Grid.ColumnSpan="1"
					/>
					<TextBlock 
						Text="{Binding Mode=OneWay, XPath=@Title}" 						
						d:LayoutOverrides="Height" HorizontalAlignment="Stretch" Margin="2,0,2,0" VerticalAlignment="Center" Grid.Column="1" 						
					/>
				</Grid>
			</Button>
		</DataTemplate>
		
	</Window.Resources>
	
	<StackPanel>
		<ToolBarTray DockPanel.Dock="Top">			
			<ToolBarTray.Background>
				<DynamicResource ResourceKey="ToolBarTrayBackground"/>
			</ToolBarTray.Background>			
			<ToolBar Width="336" Height="Auto" 
				FontFamily="Verdana" 
				FontSize="9" 
				ItemsSource="{Binding Mode=Default, Source={StaticResource MainToolBarData}, XPath=/Items/Item}" 
				ItemTemplate="{DynamicResource MainToolBarDataTemplate}"
			/>				
		</ToolBarTray>
		<TabControl IsSynchronizedWithCurrentItem="True" FontFamily="Verdana" FontSize="10">
			<TabItem Header="Page avec un nom très très long">
				<Grid/>
			</TabItem>		
			<TabItem Header="TabItem">
				<Grid/>
			</TabItem>		
		</TabControl>

		 <Grid>    
  </Grid>

	</StackPanel>
	

</Window>